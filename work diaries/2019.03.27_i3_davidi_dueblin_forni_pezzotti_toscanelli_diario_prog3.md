# GESTIONE CASINÒ | Diario di lavoro - 27.03.2019
##### Matan Davidi, Thor Düblin, Matteo Forni, Carlo Pezzotti, Mattia Toscanelli
### Trevano, 27 marzo 2019

## Lavori svolti
Matan ha proseguito con la documentazione di progetto cominciando a documentare il capitolo 1.6, Pianificazione.

Inoltre Matan ha cercato di aiutare Thor cominciando a informarsi su come verificare che le email di conferma di registrazione vengano mandate e arrivino correttamente. Questo può essere fatto grazie all'API della Oracle [JavaMail](https://javaee.github.io/javamail/) (https://javaee.github.io/javamail/), che permette di scrivere del codice Java che si collega a un server IMAP e legge le sue email grazie al seguente codice:
```java
try {

  Properties props = new Properties();
  //set email protocol to IMAP
  props.put("mail.store.protocol", "imaps");
  //set up the session
  Session session = Session.getInstance(props);
  Store store = session.getStore("imaps");

  try {

    //Connect to your email account
    store.connect("imap.hotmail.it", "gruppoCasin02018@hotmail.com", "Grupp02018");
    //Get reference to your INBOX
    Folder folder = store.getFolder("INBOX");
    //Open the folder in READ MODE only
    folder.open(Folder.READ_ONLY);
    //Get all the messages in INBOX into Message array
    Message[] messages = folder.getMessages();

    //Loop through all the messages in your INBOX
    for (Message msg : messages) {

        //Fetch the subject and content into string variables
        String mailSubject = (String) msg.getSubject();

        try {

          String mailContent = (String) msg.getContent();

          //print the subject and content on console
          System.out.println(mailSubject);
          System.out.println(mailContent);

        } catch (IOException ioe) {

          System.out.println(ioe.getMessage());

        }

      }

    } catch (MessagingException me) {

      System.out.println(me.getMessage());

    }

  } catch (NoSuchProviderException nsp) {

    System.out.println(nsp.getMessage());

  }
```
Oggi Matteo e Carlo hanno lavorato insieme per far funzionare i push di Jenkins, i problemi inizili erano ancora, come la settimana scorsa, riguardanti i permessi e abbiamo provato a risolverli impostando per l'utente jenkins a tutte le cartelle full control con il seguente comando.
```
chmod -R 777 GestioneCasino
chmod -R 777 GestioneCasinoProduction
```
Questo comando salta però alcune cartelle, secondo noi a caso, e quindi abbiamo iniziato ad impostare i permessi a mano ma ci siamo resi conto che ad ogni cartella modificata ne appariva un'altra con i permessi mancanti ed abbiamo deciso quindi di provare a mettere tutti i comandi che facevamo eseguire a Jenkins in uno script bash e fargli eseguire solo quello. Alcuni problemi si sono risolti ma non tutti quindi abbiamo provato a cambiare l'utente utilizzato da Jenkins. Per fare ciò abbiamo cercato la soluzione su internet e la abbiamo trovata a questo link: https://stackoverflow.com/questions/29926773/run-shell-command-in-jenkins-as-root-user ma facendo ciò il sito di jenkins riscontrava dei problemi. Esso infatti non si apriva più e se si caricava non funzionava il CSS. Abbiamo quindi deciso di ritornare alla situazione precedente modificando nuovamente il file di configurazione e i permessi sulle cartelle. Fatto ciò improvvisamente le compilazioni hanno iniziato a funzionare senza un motivo effettivo e nessuno riesce a spiegarsene il motivo.
Abbiamo quindi fatto ulteriori test per controllare se non fosse un caso e tutti sono riusciti senza problemi.  
Abbiamo quindi pulito la cartella GestioneCasinoProduction eliminando files inutili.

##  Problemi riscontrati e soluzioni adottate
Matan ha fatto fatica a trovare il materiale da scrivere nel capitolo 1.4 della documentazione, Analisi del dominio.

Matteo e Carlo dopo aver fatto funzionare le compilazioni hanno riscontrato che Jenkins crea tre cartelle che non si possono aprire e non ne conosciamo ancora il motivo.

##  Punto della situazione rispetto alla pianificazione
Rispetto alla pianificazione siamo in orario.

## Programma di massima per la prossima giornata di lavoro
Matan deve proseguire con la documentazione.

Matteo e Carlo devono risolvere il problema delle cartelle non apribili.
